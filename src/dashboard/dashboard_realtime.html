<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ECè‡ªå‹•åŒ–ã‚·ã‚¹ãƒ†ãƒ  - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Hiragino Sans', 'ãƒ¡ã‚¤ãƒªã‚ª', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh; color: #333;
        }
        .dashboard-container { max-width: 1400px; margin: 0 auto; padding: 20px; }
        .header { text-align: center; color: white; margin-bottom: 30px; }
        .header h1 { font-size: 2.5rem; margin-bottom: 10px; text-shadow: 2px 2px 4px rgba(0,0,0,0.3); }
        .status-bar {
            display: flex; justify-content: space-between; align-items: center;
            background: rgba(255,255,255,0.95); padding: 15px 25px; border-radius: 15px;
            margin-bottom: 30px; box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }
        .status-item { display: flex; align-items: center; gap: 10px; }
        .status-indicator {
            width: 12px; height: 12px; border-radius: 50%;
            background-color: #4ade80; animation: pulse 2s infinite;
        }
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.5; } 100% { opacity: 1; } }
        .grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px; margin-bottom: 30px;
        }
        .card {
            background: rgba(255,255,255,0.95); border-radius: 20px; padding: 25px;
            box-shadow: 0 12px 40px rgba(0,0,0,0.1); transition: transform 0.3s ease;
        }
        .card:hover { transform: translateY(-5px); }
        .card-header { display: flex; justify-content: space-between; margin-bottom: 20px; }
        .card-title { font-size: 1.3rem; font-weight: bold; color: #1f2937; }
        .metric {
            display: flex; justify-content: space-between; padding: 12px 0;
            border-bottom: 1px solid #e5e7eb;
        }
        .metric:last-child { border-bottom: none; }
        .metric-value { font-weight: bold; font-size: 1.1rem; color: #1f2937; }
        .metric-positive { color: #059669; }
        .profit-projection {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white; grid-column: 1 / -1;
        }
        .ai-insights {
            background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
            color: white; grid-column: 1 / -1;
        }
        .insight-item {
            background: rgba(255,255,255,0.1); padding: 15px; border-radius: 10px;
            margin-bottom: 15px;
        }
        .insight-priority {
            display: inline-block; padding: 4px 12px; border-radius: 20px;
            font-size: 0.8rem; font-weight: bold; margin-bottom: 8px;
            background-color: #fecaca; color: #991b1b;
        }
        .last-updated { text-align: center; color: rgba(255,255,255,0.8); margin-top: 30px; }
        
        /* ãƒãƒ£ãƒ¼ãƒˆç”¨ã‚¹ã‚¿ã‚¤ãƒ« */
        .chart-container { height: 300px; margin-top: 20px; }
        #sales-chart { width: 100%; height: 100%; }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="dashboard-container">
        <div class="header">
            <h1>ğŸš€ ECè‡ªå‹•åŒ–ã‚·ã‚¹ãƒ†ãƒ </h1>
            <div>Amazonãƒ»æ¥½å¤© Ã— AI çµ±åˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</div>
        </div>

        <div class="status-bar">
            <div class="status-item"><div class="status-indicator"></div><span>Amazon SP-API</span></div>
            <div class="status-item"><div class="status-indicator"></div><span>æ¥½å¤©API</span></div>
            <div class="status-item"><div class="status-indicator"></div><span>Gemini AI</span></div>
            <div class="status-item"><div class="status-indicator"></div><span>Claude AI</span></div>
        </div>

        <div class="grid">
            <div class="card">
                <div class="card-header"><h3 class="card-title">ğŸ›’ Amazonå£²ä¸Š</h3></div>
                <div class="metric"><span>ä»Šæ—¥ã®å£²ä¸Š</span><span class="metric-value metric-positive" id="amazon-daily">Â¥110,000</span></div>
                <div class="metric"><span>7æ—¥é–“åˆè¨ˆ</span><span class="metric-value" id="amazon-weekly">Â¥1,050,000</span></div>
                <div class="metric"><span>æ³¨æ–‡ä»¶æ•°</span><span class="metric-value" id="amazon-orders">84ä»¶</span></div>
                <div class="metric"><span>å¹³å‡æ³¨æ–‡é¡</span><span class="metric-value" id="amazon-avg">Â¥12,500</span></div>
            </div>

            <div class="card">
                <div class="card-header"><h3 class="card-title">ğŸŸ¢ æ¥½å¤©å£²ä¸Š</h3></div>
                <div class="metric"><span>ä»Šæ—¥ã®å£²ä¸Š</span><span class="metric-value metric-positive" id="rakuten-daily">Â¥55,000</span></div>
                <div class="metric"><span>7æ—¥é–“åˆè¨ˆ</span><span class="metric-value" id="rakuten-weekly">Â¥665,000</span></div>
                <div class="metric"><span>æ³¨æ–‡ä»¶æ•°</span><span class="metric-value" id="rakuten-orders">58ä»¶</span></div>
                <div class="metric"><span>å¹³å‡æ³¨æ–‡é¡</span><span class="metric-value" id="rakuten-avg">Â¥11,466</span></div>
            </div>

            <div class="card">
                <div class="card-header"><h3 class="card-title">ğŸ“¦ åœ¨åº«çŠ¶æ³</h3></div>
                <div class="metric"><span>åœ¨åº«å……è¶³ç‡</span><span class="metric-value" id="stock-ratio">85%</span></div>
                <div class="metric"><span>è¦è£œå……å•†å“</span><span class="metric-value" id="low-stock">31ä»¶</span></div>
                <div class="metric"><span>ç·å•†å“æ•°</span><span class="metric-value" id="total-items">206ä»¶</span></div>
                <div class="metric"><span>åœ¨åº«å›è»¢ç‡</span><span class="metric-value">92%</span></div>
            </div>

            <div class="card">
                <div class="card-header"><h3 class="card-title">ğŸ“Š ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹</h3></div>
                <div class="metric"><span>Amazonè»¢æ›ç‡</span><span class="metric-value">3.2%</span></div>
                <div class="metric"><span>æ¥½å¤©è»¢æ›ç‡</span><span class="metric-value">2.8%</span></div>
                <div class="metric"><span>æ¥½å¤©è©•ä¾¡å¹³å‡</span><span class="metric-value">â­4.3</span></div>
                <div class="metric"><span>ãƒ¬ãƒ“ãƒ¥ãƒ¼æ•°</span><span class="metric-value">342ä»¶</span></div>
            </div>

            <div class="card">
                <div class="card-header"><h3 class="card-title">ğŸ“ˆ 7æ—¥é–“å£²ä¸Šæ¨ç§»</h3></div>
                <div class="chart-container">
                    <canvas id="sales-chart"></canvas>
                </div>
            </div>
        </div>

        <div class="card profit-projection">
            <div class="card-header">
                <h3 class="card-title" style="color: white;">ğŸ’° åˆ©ç›Šäºˆæ¸¬ & ROIåˆ†æ</h3>
            </div>
            <div class="grid" style="margin-bottom: 0;">
                <div class="metric"><span style="color: rgba(255,255,255,0.8);">ç¾åœ¨ã®æœˆæ¬¡åˆ©ç›Š</span><span class="metric-value" style="color: white;" id="current-profit">Â¥1,123,500</span></div>
                <div class="metric"><span style="color: rgba(255,255,255,0.8);">æ”¹å–„å¾Œäºˆæ¸¬åˆ©ç›Š</span><span class="metric-value" style="color: white;" id="projected-profit">Â¥1,451,000</span></div>
                <div class="metric"><span style="color: rgba(255,255,255,0.8);">åˆ©ç›Šå¢—åŠ é¡</span><span class="metric-value" style="color: white;" id="profit-increase">Â¥327,500</span></div>
                <div class="metric"><span style="color: rgba(255,255,255,0.8);">ROIå‘ä¸Šç‡</span><span class="metric-value" style="color: white;" id="roi-improvement">18.1%</span></div>
            </div>
        </div>

        <div class="card ai-insights">
            <div class="card-header">
                <h3 class="card-title" style="color: white;">ğŸ¤– AIæ¨å¥¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³</h3>
            </div>
            <div class="insight-item">
                <div class="insight-priority">é«˜å„ªå…ˆåº¦</div>
                <h4>Amazon: å•†å“ãƒšãƒ¼ã‚¸æœ€é©åŒ–</h4>
                <p><strong>æœŸå¾…åŠ¹æœ:</strong> å£²ä¸Š15-25%å‘ä¸Š</p>
                <p><strong>åˆ©ç›Šå‘ä¸Š:</strong> Â¥22,500-37,500/æ—¥</p>
                <p>ãƒ¡ã‚¤ãƒ³ç”»åƒã®æ”¹å–„ã¨ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æœ€é©åŒ–ã«ã‚ˆã‚Šã€æ¤œç´¢é †ä½å‘ä¸ŠãŒæœŸå¾…ã§ãã¾ã™ã€‚</p>
            </div>
            <div class="insight-item">
                <div class="insight-priority">é«˜å„ªå…ˆåº¦</div>
                <h4>æ¥½å¤©: ä¾¡æ ¼æˆ¦ç•¥è¦‹ç›´ã—</h4>
                <p><strong>æœŸå¾…åŠ¹æœ:</strong> å£²ä¸Š10-20%å‘ä¸Š</p>
                <p><strong>åˆ©ç›Šå‘ä¸Š:</strong> Â¥9,500-19,000/æ—¥</p>
                <p>ç«¶åˆåˆ†æã«ã‚ˆã‚Šã€3-5%ã®ä¾¡æ ¼èª¿æ•´ã§å£²ä¸Šå‘ä¸ŠãŒè¦‹è¾¼ã‚ã¾ã™ã€‚</p>
            </div>
        </div>

        <div class="last-updated">
            æœ€çµ‚æ›´æ–°: <span id="last-update-time">2025-06-14 22:39:15</span>
        </div>
    </div>

    <script>
        let salesChart;
        
        // ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿
        async function loadDashboardData() {
            try {
                const response = await fetch('dashboard_data.json');
                const data = await response.json();
                updateDashboard(data);
            } catch (error) {
                console.log('ãƒ‡ãƒ¢ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨ã—ã¾ã™');
                // ãƒ‡ãƒ¢ãƒ‡ãƒ¼ã‚¿ã§ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚’æ›´æ–°
                updateDashboard(getDemoData());
            }
        }
        
        // ãƒ‡ãƒ¢ãƒ‡ãƒ¼ã‚¿
        function getDemoData() {
            return {
                sales: {
                    today: 165000,
                    week_total: 1715000,
                    order_count: 142,
                    avg_order_value: 12084,
                    daily_sales: {
                        "2025-06-08": 245000,
                        "2025-06-09": 230000,
                        "2025-06-10": 280000,
                        "2025-06-11": 195000,
                        "2025-06-12": 310000,
                        "2025-06-13": 290000,
                        "2025-06-14": 165000
                    }
                },
                inventory: {
                    stock_ratio: 88.5,
                    low_stock: 31,
                    total_items: 206
                },
                profit: {
                    today_profit: 49500,
                    week_profit: 514500,
                    profit_rate: 0.3
                },
                last_updated: new Date().toLocaleString('ja-JP')
            };
        }
        
        // ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰æ›´æ–°
        function updateDashboard(data) {
            // å£²ä¸Šãƒ‡ãƒ¼ã‚¿æ›´æ–°
            document.getElementById('amazon-daily').textContent = `Â¥${Math.floor(data.sales.today * 0.65).toLocaleString()}`;
            document.getElementById('amazon-weekly').textContent = `Â¥${Math.floor(data.sales.week_total * 0.65).toLocaleString()}`;
            document.getElementById('amazon-orders').textContent = `${Math.floor(data.sales.order_count * 0.6)}ä»¶`;
            document.getElementById('amazon-avg').textContent = `Â¥${Math.floor(data.sales.avg_order_value * 1.05).toLocaleString()}`;
            
            document.getElementById('rakuten-daily').textContent = `Â¥${Math.floor(data.sales.today * 0.35).toLocaleString()}`;
            document.getElementById('rakuten-weekly').textContent = `Â¥${Math.floor(data.sales.week_total * 0.35).toLocaleString()}`;
            document.getElementById('rakuten-orders').textContent = `${Math.floor(data.sales.order_count * 0.4)}ä»¶`;
            document.getElementById('rakuten-avg').textContent = `Â¥${Math.floor(data.sales.avg_order_value * 0.95).toLocaleString()}`;
            
            // åœ¨åº«ãƒ‡ãƒ¼ã‚¿æ›´æ–°
            document.getElementById('stock-ratio').textContent = `${data.inventory.stock_ratio}%`;
            document.getElementById('low-stock').textContent = `${data.inventory.low_stock}ä»¶`;
            document.getElementById('total-items').textContent = `${data.inventory.total_items}ä»¶`;
            
            // åˆ©ç›Šãƒ‡ãƒ¼ã‚¿æ›´æ–°
            document.getElementById('current-profit').textContent = `Â¥${Math.floor(data.profit.week_profit * 4.33).toLocaleString()}`;
            document.getElementById('projected-profit').textContent = `Â¥${Math.floor(data.profit.week_profit * 4.33 * 1.18).toLocaleString()}`;
            document.getElementById('profit-increase').textContent = `Â¥${Math.floor(data.profit.week_profit * 4.33 * 0.18).toLocaleString()}`;
            
            // æ›´æ–°æ™‚åˆ»
            document.getElementById('last-update-time').textContent = data.last_updated;
            
            // ãƒãƒ£ãƒ¼ãƒˆæ›´æ–°
            updateSalesChart(data.sales.daily_sales);
        }
        
        // å£²ä¸Šãƒãƒ£ãƒ¼ãƒˆæ›´æ–°
        function updateSalesChart(dailySales) {
            const ctx = document.getElementById('sales-chart').getContext('2d');
            
            if (salesChart) {
                salesChart.destroy();
            }
            
            const labels = Object.keys(dailySales).map(date => {
                const d = new Date(date);
                return `${d.getMonth() + 1}/${d.getDate()}`;
            });
            
            const values = Object.values(dailySales);
            
            salesChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'å£²ä¸Š (Â¥)',
                        data: values,
                        borderColor: '#8b5cf6',
                        backgroundColor: 'rgba(139, 92, 246, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return 'Â¥' + value.toLocaleString();
                                }
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });
        }
        
        // æ™‚åˆ»æ›´æ–°
        function updateTime() {
            document.getElementById('last-update-time').textContent = new Date().toLocaleString('ja-JP');
        }
        
        // 30ç§’ã”ã¨ã«ãƒ‡ãƒ¼ã‚¿æ›´æ–°
        setInterval(() => {
            loadDashboardData();
        }, 30000);
        
        // åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', () => {
            loadDashboardData();
            console.log('ğŸ“Š ECè‡ªå‹•åŒ–ã‚·ã‚¹ãƒ†ãƒ  ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰èµ·å‹•å®Œäº†');
        });
    </script>
</body>
</html>